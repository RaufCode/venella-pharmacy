<script setup>
    import { ref, computed } from "vue";
    import OverView from "./OverView.vue";
    import MedicationHero from "./MedicationHero.vue";
    import SalesHero from "./SalesHero.vue";
    import StaffHero from "./StaffHero.vue";
    import { RouterLink } from "vue-router";

    const activeTab = ref("overview");
    const hamburger = ref(false);

    // Label for the top bar
    const tabLabel = computed(() => {
        switch (activeTab.value) {
            case "overview":
                return "Overview";
            case "medication":
                return "Inventory Hub";
            case "sales":
                return "Sales Hub";
            case "staff":
                return "Staff Hub";
            default:
                return "Vanella Pharmacy";
        }
    });
</script>

<template>
    <div class="h-screen w-screen flex relative overflow-hidden">
        <!-- Top Bar (Mobile Only) -->
        <div
            class="fixed top-0 md:hidden p-3 text-sm flex items-center justify-between bg-white shadow-md z-40 w-full"
        >
            <button @click="hamburger = !hamburger">
                <i class="pi pi-align-left"></i>
            </button>
            <h1 class="text-2xl font-styleScript text-orange-600">
                {{ tabLabel }}
            </h1>
            <RouterLink to="/login" class="text-gray-700">
                <i class="pi pi-sign-out"></i>
            </RouterLink>
        </div>

        <!-- Sidebar -->
        <aside
            :class="[
                'fixed md:relative top-0 z-50 min-h-screen w-full md:w-[250px] lg:w-[270px] bg-white shadow-lg text-gray-800 transition-all duration-500 ease-in-out transform',
                hamburger
                    ? 'translate-x-0 opacity-100 blur-none'
                    : '-translate-x-full opacity-20 blur-sm pointer-events-none',
                'md:translate-x-0 md:opacity-100 md:blur-none md:pointer-events-auto md:block',
            ]"
        >
            <div class="pt-2 flex items-center gap-4 justify-end md:block">
                <h1
                    class="font-styleScript text-2xl text-center py-2 md:py-6 text-orange-600 md:text-3xl"
                >
                    Dashboard
                </h1>
                <button @click="hamburger = !hamburger" class="pr-2 md:hidden">
                    <i class="pi pi-align-right"></i>
                </button>
            </div>

            <!-- Navigation Buttons -->
            <nav class="flex flex-col">
                <button
                    @click="
                        activeTab = 'overview';
                        hamburger = false;
                    "
                    class="a-dashboard-navs"
                    :class="{
                        'bg-orange-600 text-white hover:bg-orange-500':
                            activeTab === 'overview',
                    }"
                >
                    <i class="pi pi-home"></i> Overview
                </button>
                <button
                    @click="
                        activeTab = 'medication';
                        hamburger = false;
                    "
                    class="a-dashboard-navs"
                    :class="{
                        'bg-orange-600 text-white hover:bg-orange-500':
                            activeTab === 'medication',
                    }"
                >
                    <i class="pi pi-shield"></i> Medications
                </button>
                <button
                    @click="
                        activeTab = 'sales';
                        hamburger = false;
                    "
                    class="a-dashboard-navs"
                    :class="{
                        'bg-orange-600 text-white hover:bg-orange-500':
                            activeTab === 'sales',
                    }"
                >
                    <i class="pi pi-book"></i> Sales
                </button>
                <button
                    @click="
                        activeTab = 'staff';
                        hamburger = false;
                    "
                    class="a-dashboard-navs"
                    :class="{
                        'bg-orange-600 text-white hover:bg-orange-500':
                            activeTab === 'staff',
                    }"
                >
                    <i class="pi pi-users"></i> Staff
                </button>
                <button class="a-dashboard-navs">
                    <i class="pi pi-info-circle"></i> Notifications
                </button>
            </nav>

            <!-- Logout Button -->
            <RouterLink to="/login" class="block">
                <button
                    class="mt-16 md:mt-20 py-2 w-full pl-3 rounded font-medium text-sm flex items-center gap-4 text-gray-800 md:pl-5 hover:bg-gray-100 focus:bg-orange-600 focus:text-white"
                >
                    <i class="pi pi-sign-out"></i> Logout
                </button>
            </RouterLink>
        </aside>

        <!-- Main Content -->
        <main class="pt-14 bg-gray-50 w-full min-h-screen md:pt-0">
            <OverView v-if="activeTab === 'overview'" />
            <MedicationHero v-if="activeTab === 'medication'" />
            <SalesHero v-if="activeTab === 'sales'" />
            <StaffHero v-if="activeTab === 'staff'" />
        </main>
    </div>
</template>
